[gcode_macro PURGE_BUCKET]
description: "Macro to purge filament into a bucket"
default_parameter_extrude_length: 25
default_parameter_extrude_speed: 300  # Extrusion speed in mm/min
default_parameter_x: 35
default_parameter_y: 0
default_parameter_z: 35

gcode:
    # Set display message
    SET_DISPLAY_TEXT MSG="Filament Feeding"

    # Move to the specified position
    G1 X{extrude_length} Y{extrude_speed} Z{z} F3000

    # Extrude filament 3 times
    {% for _ in range(3) %}
    G1 E{extrude_length} F{extrude_speed}
    G4 P500
    {% endfor %}

    # Clear display message
    SET_DISPLAY_TEXT MSG="Purging Complete"
