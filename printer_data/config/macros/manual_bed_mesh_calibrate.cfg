#####################################################################
#   MANUAL_BED_MESH_CALIBRATE
#   FÃ¼hrt Quad Gantry Leveling + Mesh Kalibrierung durch
#   Optional: Speichert Mesh-Profil "standard"
#####################################################################

[gcode_macro MANUAL_BED_MESH_CALIBRATE]
variable_bed_temp: 60               # Standard-Bett-Temperatur
variable_extruder_temp: 150         # Standard-Extruder-Temperatur
variable_save_mesh: 1               # 1 = Mesh speichern, 0 = nicht speichern

gcode:
    # Home alle Achsen
    G28

    # Bett und Extruder aufheizen
    M140 S{variable_bed_temp}
    M104 S{variable_extruder_temp}

    # Warten bis Zieltemperatur erreicht
    M190 S{variable_bed_temp}
    M109 S{variable_extruder_temp}

    # Quad Gantry Leveling
    QUAD_GANTRY_LEVEL

    # Mesh Kalibrierung
    BED_MESH_CALIBRATE

    # Optional: Mesh speichern
    {% if variable_save_mesh|int == 1 %}
        BED_MESH_PROFILE SAVE=name=standard
        SAVE_CONFIG
    {% endif %}

    # Heizung wieder ausschalten
    M104 S0
    M140 S0
