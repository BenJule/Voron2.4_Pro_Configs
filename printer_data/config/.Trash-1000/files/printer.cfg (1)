# Basis Firmware Includes
[include mainsail.cfg]
[include macros.cfg]

# KAMP Integration
[include KAMP_Settings.cfg]

# Manuelles Mesh Kalibrieren (optional)
[include macros/manual_bed_mesh_calibrate.cfg]

# MCU Definition
[mcu Pi4B 8GB]
serial: /tmp/klipper_host_mcu

[mcu]
serial: /dev/serial/by-id/usb-Klipper_stm32f446xx_40003E000350534E4E313020-if00
restart_method: command

# Drucker-Grundkonfiguration
[printer]
kinematics: corexy
max_velocity: 300               # sichere max Geschwindigkeit
max_accel: 3500                # typische max Beschleunigung
max_z_velocity: 15             # Z Achse langsamer
max_z_accel: 350
square_corner_velocity: 5.0

# Schritt- und Treiber Konfigurationen
[include ./config/stepper.cfg]
[include ./config/tmc2209.cfg]

# Extruder und Heizungen
[include ./config/extruder.cfg]
[include ./config/heater.cfg]

# Lüftersteuerung
[include ./config/fans.cfg]

# Bettnivellierung / Probe
[include ./config/probing.cfg]

# Bett Einstellungen (Größe, Mesh Grid, etc.)
[include ./config/bed.cfg]

# Gantry und Homing
[include ./config/gantry.cfg]

# Pinouts
[include ./config/pinouts.cfg]

# Sensoren (Temperaturen, Endstops etc.)
[include ./config/sensors.cfg]

# Optional: Display (nur falls du eins hast, sonst raus)
# [display]
# lcd_type: emulated_st7920
# spi_software_miso_pin: PA6
# spi_software_mosi_pin: EXP1_3
# spi_software_sclk_pin: EXP1_5
# en_pin: EXP1_4
# encoder_pins: ^EXP2_5, ^EXP2_3
# click_pin: ^!EXP1_2

# Virtuelle SD Karte für GCode Storage
[virtual_sdcard]
path: /home/benlue/printer_data/gcodes
on_error_gcode: CANCEL_PRINT

# Bewegungsoptimierung deaktiviert (später nach Bedarf aktivieren)
# [auto_speed]

# Input Shaper: Auskommentieren, wenn nicht aktiv genutzt
# [input_shaper]

# Grundeinstellungen
[respond]
default_type: echo

[force_move]
enable_force_move: true

[idle_timeout]
timeout: 1800

[display_status]

[pause_resume]